const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CspSaxt6.js","assets/index-D3Eed0Yt.css"])))=>i.map(i=>d[i]);
var A=Object.defineProperty;var S=(m,p,e)=>p in m?A(m,p,{enumerable:!0,configurable:!0,writable:!0,value:e}):m[p]=e;var T=(m,p,e)=>S(m,typeof p!="symbol"?p+"":p,e);import{B as N,e as u,f as g,g as f,h as v,i as L,a as P,_ as M,b as O,d as R,c as b,l as H}from"./index-CspSaxt6.js";import{c as D,a as G}from"./pongLayout-BhObQqDH.js";class Y extends N{constructor(e="ai-pong",a){super(e,a);T(this,"aiType","");T(this,"aiIntervalId",null);T(this,"aiChoices");this.container=document.createElement("div"),this.aiChoices=[{id:"easy",label:"BEGINNER AI",desc:"PERFECT FOR BEGINNERS! FACE A FORGIVING OPPONENT THAT GIVES YOU TIME TO REACT AND PLENTY OF OPPORTUNITIES TO SCORE. BUILD YOUR CONFIDENCE AND MASTER THE BASICS OF PONG IN THIS RELAXED MODE."},{id:"medium",label:"CHALLENGER AI",desc:"A BALANCED CHALLENGE FOR INTERMEDIATE PLAYERS. THIS AI REACTS FASTER AND MAKES FEWER MISTAKES. TEST YOUR REFLEXES AND STRATEGY IN THIS COMPETITIVE MODE THAT REWARDS SKILL AND FOCUS."},{id:"strong",label:"EXPERT AI",desc:"FOR SEASONED PLAYERS ONLY! THIS FORMIDABLE OPPONENT FEATURES LIGHTNING-FAST REACTIONS AND PRECISION TARGETING. OUTSMART THE ALGORITHM WITH UNPREDICTABLE PLAYS AND PERFECT TIMING TO CLAIM VICTORY."},{id:"hard",label:"NIGHTMARE AI",desc:"THE ULTIMATE TEST OF SKILL AND ENDURANCE. FACE THE PERFECT MACHINE WITH SUPERHUMAN REFLEXES AND FLAWLESS PREDICTION. CAN YOU FIND THE ONE WEAKNESS IN THIS SEEMINGLY UNBEATABLE OPPONENT? ONLY LEGENDS HAVE SUCCEEDED."}]}async render(){this.container.innerHTML="",await super.setupHeaderListeners(),this.setupKeyHandlers();const e=await this.createSidebar(),a=document.createElement("div");a.className="min-h-screen pt-4 relative overflow-hidden flex flex-row bg-cyber-dark";const n=u(H,"AI Pong Background"),t=g("PONG VS IA","CHALLENGE THE MACHINE");a.innerHTML=e;const i=document.createElement("main");i.className="flex-1 flex flex-col",i.appendChild(n),i.appendChild(t);const r=document.createElement("div");return r.className="flex-1 px-8 pb-8 pt-4 relative z-10 flex flex-col items-center",r.innerHTML=`
            <div id="ai-choice-container" class="max-w-5xl mx-auto w-full"></div>
            <div id="pong-container" class="mt-4 max-w-5xl mx-auto cyber-border relative w-full flex flex-col items-center"></div>
        `,i.appendChild(r),a.appendChild(i),this.container.appendChild(a),this.renderAiChoiceCards(),await super.setupSidebarListeners(),this.container}renderAiChoiceCards(){const e=this.container.querySelector("#ai-choice-container");if(!e)return;const a=f("flex flex-col items-center justify-center gap-8"),n=v("CHOOSE YOUR OPPONENT"),t=this.aiChoices.map(r=>D(r.label,r.desc,r.id,async()=>await this.startGame(r.id))),i=G(t);a.appendChild(n),a.appendChild(i),e.innerHTML="",e.appendChild(a)}async startGame(e){this.aiType=e;const a=this.container.querySelector("#ai-choice-container");a?(a.classList.add("animate-fade-out"),setTimeout(async()=>{a&&(a.innerHTML=""),await this.initializeGame(e)},300)):await this.initializeGame(e)}async initializeGame(e){const a=this.container.querySelector("#pong-container");a&&(a.innerHTML="");const n=L(e);a&&a.appendChild(n);const t=P("ai");a&&a.appendChild(t);const i="YOU",r=e.toUpperCase()+" AI",{default:o}=await M(async()=>{const{default:s}=await import("./index-CspSaxt6.js").then(C=>C.p);return{default:s}},__vite__mapDeps([0,1]));this.pongComponent=new o(i,r,{aiType:e,onGameEnd:s=>this.handleGameEnd(s)});const{wrapper:l,inner:c}=O();this.pongComponent&&c.appendChild(this.pongComponent.render()),a&&a.appendChild(l);const h=R([{id:"restart-btn",text:"RESTART",type:"primary",onClick:async()=>await this.initializeGame(e)},{id:"change-level-btn",text:"CHANGE LEVEL",type:"secondary",onClick:()=>this.showAiChoices()}]);a&&a.appendChild(h),this.setupAiLoop()}showAiChoices(){this.aiIntervalId!==null&&(clearInterval(this.aiIntervalId),this.aiIntervalId=null);const e=this.container.querySelector("#pong-container");e&&(e.innerHTML="");const a=this.container.querySelector("#ai-choice-container");a&&(a.innerHTML="",this.renderAiChoiceCards())}predictBallY(e,a,n,t,i,r,o,l){let c=e,d=a,h=n,s=t;for(;h>0&&c<i||h<0&&c>i;){const C=Math.abs((i-c)/h);let E=d+s*C;if(E-l<0){const I=(l-d)/s;c+=h*I,d=l,s=-s}else if(E+l>o){const I=(o-l-d)/s;c+=h*I,d=o-l,s=-s}else{c=i,d=E;break}}return d}setupAiLoop(){if(!this.pongComponent)return;const e=this.pongComponent,a=this.aiType;let n=e.rightPaddleY,t=0,i=1e3,r=0,o=0,l=.1;switch(a){case"easy":i=1200,r=.35,o=60,l=.25;break;case"medium":i=900,r=.15,o=30,l=.18;break;case"strong":i=400,r=.02,o=5,l=.03;break;case"hard":i=40,r=0,o=0,l=0;break}this.aiIntervalId!==null&&(clearInterval(this.aiIntervalId),this.aiIntervalId=null);const c=()=>{if(!e||!e.ball||!e.rightPaddle)return;if(a==="hard"){const C=e.canvas.width-e.ballRadius-1;let E=this.predictBallY(e.ballX,e.ballY,e.ballSpeedX,e.ballSpeedY,C,e.canvas.width,e.canvas.height,e.ballRadius);n=Math.max(0,Math.min(e.canvas.height-e.paddleHeight,E-e.paddleHeight/2));const I=.22+Math.random()*.08;t+=(n-e.rightPaddleY-t)*I,t=Math.max(Math.min(t,12),-12),Math.abs(t)>2?(e.rightPaddleUp=t<0,e.rightPaddleDown=t>0):(e.rightPaddleUp=!1,e.rightPaddleDown=!1);return}if(Math.random()<l){e.rightPaddleUp=!1,e.rightPaddleDown=!1;return}if(!e||!e.ball||!e.rightPaddle)return;if(!(e.ballSpeedX>0))n=e.canvas.height/2-e.paddleHeight/2;else{const C=e.canvas.width-e.ballRadius-1;let E=e.ballY;a!=="easy"&&(E=this.predictBallY(e.ballX,e.ballY,e.ballSpeedX,e.ballSpeedY,C,e.canvas.width,e.canvas.height,e.ballRadius));let I=(Math.random()-.5)*o;I+=(Math.random()-.5)*12,Math.random()<r?E+=(Math.random()-.5)*e.canvas.height*.5:E+=I,n=Math.max(0,Math.min(e.canvas.height-e.paddleHeight,E-e.paddleHeight/2))}const s=.18+Math.random()*.1;t+=(n-e.rightPaddleY-t)*s,t=Math.max(Math.min(t,8),-8),Math.abs(t)>4?(e.rightPaddleUp=t<0,e.rightPaddleDown=t>0):(e.rightPaddleUp=!1,e.rightPaddleDown=!1)},d=()=>{c();const h=a==="hard"?i:i+Math.floor((Math.random()-.5)*i*.4);this.aiIntervalId=window.setTimeout(d,Math.max(8,h))};d()}destroy(){this.aiIntervalId!==null&&(clearInterval(this.aiIntervalId),this.aiIntervalId=null),super.destroy()}handleGameEnd(e){this.aiIntervalId!==null&&(clearInterval(this.aiIntervalId),this.aiIntervalId=null);const a=this.container.querySelector("#pong-container");if(!a)return;const n=b(e,async()=>{a.removeChild(n),await this.initializeGame(this.aiType)},()=>{var t;a.removeChild(n),(t=this.router)==null||t.navigate("/dashboard")});a.appendChild(n)}}export{Y as default};
